nifi-cluster:
  cluster:
    image:
      tag: "2.3.0"
    manager: kubernetes
    nifiProperties:
      # TODO passing the sensitive key in this manner is not good. But I do not see another way ATM.
      overrideConfigs: |
        nifi.web.proxy.context.path=/nifi-cluster
        nifi.sensitive.props.key=thisIsABadSensitiveKeyPassword
  serviceAccount:
    # This must be present and empty.
    name:

  ingress:
    enabled: true
    className: nginx
    annotations:
      manager.io/issuer: letsencrypt-prod
      nginx.ingress.kubernetes.io/enable-cors: "true"
      nginx.ingress.kubernetes.io/cors-allow-headers: DNT,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type,Range,Authorization,Request-Token
    hosts:
      - host: nifi.localhost
        paths:
          - path: /
            pathType: ImplementationSpecific
            backend:
              service:
                # TODO Can I template this service name?
                name: cbio-nifi-nifi-cluster-headless
                port:
                  number: 8080
